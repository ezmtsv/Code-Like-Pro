## Домашнее задание к занятию «14. Регистрация, аутентификация и авторизация»

#### Задача №1. Аутентификация

Задача №1. Аутентификация
Описание
При нажатии на пункт меню «Sign in» реализуйте следующую последовательность действий:

1. Открытие фрагмента с двумя полями (логин и пароль) и кнопкой «Войти». Создайте для этого фрагмента собственную ViewModel.

2. Отправку запроса вида:

POST http://localhost:9999/api/users/authentication
Content-Type: application/x-www-form-urlencoded

login=student&pass=secret
В ответ вам придёт JSON вида:

{
  "id": 6,
  "token": "j/cAPk6GZEm7Vmq..."
}
Где id — идентификатор пользователя с логином student и паролем secret, а token — это и есть токен.

Как отправлять формы формата form-encoded (application/x-www-form-urlencoded), смотрите в документации на Retrofit.

Если не нашли, как отправлять форму:
@FormUrlEncoded
@POST("users/authentication")
suspend fun updateUser(@Field("login") login: String, @Field("pass") pass: String): Response<ваш_тип>

3. Сохраните указанную пару в AppAuth.

4. Вернитесь на предыдущий фрагмент, с которого вы попали на фрагмент аутентификации.

Убедитесь, что меню в ActionBar и карточки постов, автором которых вы являетесь, обновились.


#### Задача №2. Sign In to ... и Are you sure?*
  
  Описание
  
Реализуйте следующую функциональность:

1. Когда на экране находится лента постов в PostViewModel, проходит проверка, аутентифицирован ли пользователь. Проверка проходит при:

добавлении поста (нажатие на Fab +);
лайке поста.
Если пользователь не аутентифицирован, появляется диалоговое окно с предложением пройти аутентификацию. Перенаправляйте пользователя на фрагмент аутентификации, который вы реализовали в предыдущем пункте.

2. При создании поста возникает диалоговое окно с подтверждением выхода, если пользователь в ActionBar выбрал пункт меню Sign Out.

Если пользователь подтвердил выход, перенаправляйте на предыдущий фрагмент.


#### Задача №3. Регистрация*

Важно: это необязательная задача. Её можно не выполнять. На зачёт это не повлияет.

Описание

Реализуйте при нажатии на пункт меню «Sign Up» следующую последовательность действий:

1. Открывается фрагмент с 4 полями (имя, логин, пароль и подтверждение пароля) и кнопкой «Зарегистрироваться». Создайте для этого фрагмента собственную ViewModel.

2. Отправляется запроса вида:

POST /api/users/registration
Content-Type: application/x-www-form-urlencoded

login=noname&pass=secret&name=NoName
В ответ вам придёт JSON вида:

{
  "id": 7,
  "token": "j/cAPk6GZEm7Vmq..."
}
где id — идентификатор созданного пользователя, а token — это и есть токен.

Как отправлять формы формата form-encoded (application/x-www-form-urlencoded), смотрите в документации на Retrofit.

Если не нашли, как отправлять форму:
@FormUrlEncoded
@POST("users/registration")
suspend fun registerUser(@Field("login") login: String, @Field("pass") pass: String, @Field("name") name: String): Response<ваш_тип>
3. Сохраните указанную пару в AppAuth.

4. Вернитесь на предыдущий фрагмент, с которого вы попали на фрагмент регистрации.

Убедитесь, что меню в ActionBar и карточки постов, автором которых вы являетесь, обновились.


[Описание задания 14](https://github.com/netology-code/andin-homeworks/tree/ANDIN-36/13_auth)